== Jcohy Gradle Plugins

= CheckStyle

使用 jcohy-java-checkstyle 进行代码检查

[source,groovy]
----
plugins {
	id "checkstyle"
}

checkstyle "jcohy-gradle-plugins:jcohy-java-checkstyle:0.0.1"
----

== Checks

=== SpringCatchCheck

检查 catch 块，不能使用 单字符变量，也不能使用 `o_O` 变量

==== 示例

配置如下 check

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

===== Example 1:

[source,java]
.CatchE.java
----
// header Ignore

/**
 * A invalid catch with e as the variable.
 *
 * @author Phillip Webb
 */
public class CatchE {

	public void test() {
		try {
			new String("foo");
		}
		catch (IllegalStateException e) { // violation, Single letter catch variable (use "ex" instead)
			// Ignore
		}
	}

}
----

===== Example 2:

[source,java]
.CatchEx.java
----
// header Ignore
/**
 * A valid catch with ex as the variable.
 *
 * @author Phillip Webb
 */
public class CatchEx {

	public void test() {
		try {
			new String("foo");
		}
		catch (IllegalStateException ex) { // OK
			// Ignore
		}
	}

}
----

===== Example 3:

[source,java]
----
// header Ignore

/**
 * A invalid catch with o_O as the variable.
 *
 * @author Phillip Webb
 */
public class CatchOo {

	public void test() {
		try {
			new String("foo");
		}
		catch (IllegalStateException o_O) { // // violation, 'o_O' catch variable (use "ex" instead)
			// Ignore
		}
	}

}
----

===== Example 4:

[source,java]
----
// header Ignore

/**
 * A valid catch with a full word as the variable.
 *
 * @author Phillip Webb
 */
public class CatchWord {

	public void test() {
		try {
			new String("foo");
		}
		catch (IllegalStateException illegalStateException) { // OK
			// Ignore
		}
	}

}
----

=== SpringHeaderCheck

`SpringHeaderCheck` 用来检查文件头部信息。当使用了此 Check 时，默认使用 Apache LICENSE 2.0 头部信息并且必须配置 header。

此 Check 提供了以下可配置属性

|===
|属性 |默认值 |说明

| charset
| UTF-8
| 编码

| headerType
| apache2
| 文件类型

| headerFile
|
| 文件地址

| headerCopyrightPattern
| 20\d\d(-20\d\d)?
| 文件的版权信息，替换给定文件中的 ${copyright-pattern} 字段

| packageInfoHeaderType
|
| package-info 文件类型

| packageInfoHeaderFile
|
| package-info 文件地址

| blankLineAfter
| true
| 最后一行是否包含空白行
|===

[TIP]
====
关于 headerType 的使用

会检查每个文件的头部是否具有 headerFile 指定的文件的头部信息。如果给定的文件为空，会读取 header-{type}.txt 文件。默认值为 apache2,则默认会读取 header-{apache2}.txt

另外提供了两个可选项 `unchecked` 和 `none`

* unchecked: 不检查 header. header 可有可无
* none: 不能有 header.
====

==== 示例

===== Example 1:

给定如下 Check 配置:

[source,xml]
.HeaderDate.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks">
		<property name="headerCopyrightPattern" value="2011-20\d\d"/>
	</module>
</module>
----

则:

[source,java]
.HeaderDate.java
----
/*
 * Copyright 2017-2019 the original author or authors. // violation, Line does not match expected header
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 */

/**
 * The header data pattern is specified and doesn't match.
 *
 * @author Phillip Webb
 */
public class HeaderDate {

}

----

===== Example 2:

给定如下 Check 配置:

[source,xml]
.HeaderFile.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks">
		<property name="headerFile" value="src/test/resources/customHeaderFile.txt"/>
	</module>
</module>
----

[source,text]
.customHeaderFile.txt
----
// (c) Somebody ${copyright-pattern}
----

则:

[source,java]
----
// (c) Somebody 2017-2019 // OK

/**
 * A custom header file.
 *
 * @author Phillip Webb
 */
public class HeaderFile {

}

----

===== Example 3:

给定如下 Check 配置:

[source,xml]
.HeaderMissingBlankLine.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks">
		<property name="headerFile" value="src/test/resources/customHeaderFile.txt"/>
	</module>
</module>
----

则:

[source,java]
.HeaderMissingBlankLine.java
----
// (c) Somebody 2017-2019 // violation,Blank line expected after header
/**
 * A custom header file.
 *
 * @author Phillip Webb
 */
public class HeaderMissingBlankLine {

}
----

===== Example 4:

给定如下 Check 配置:

[source,xml]
.HeaderMustBeMissing.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks">
		<property name="headerType" value="none"/>
	</module>
</module>
----

则:

[source,java]
.HeaderMustBeMissing.java
----
package example; // OK

/**
 * The Apache header doesn't match.
 *
 * @author Phillip Webb
 */
public class HeaderMustBeMissing {

}

----

===== Example 5:

给定如下 Check 配置:

[source,xml]
.HeaderMustBeMissingButIsNot.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks">
		<property name="headerType" value="none"/>
	</module>
</module>
----

则:

[source,java]
.HeaderMustBeMissingButIsNot.java
----
/* Header */  // violation,Unexpected header.
package example;

/**
 * The Apache header doesn't match.
 *
 * @author Phillip Webb
 */
public class HeaderMustBeMissingButIsNot {

}

----

===== Example 6:

给定如下 Check 配置:

[source,xml]
.HeaderUnchecked.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks">
		<property name="headerType" value="unchecked"/>
	</module>
</module>
----

则:

[source,java]
.HeaderUnchecked.java
----
/*
 * It really doesn't matter.  // OK
 */

/**
 * The header unchecked.
 *
 * @author Phillip Webb
 */
public class HeaderUnchecked {

}

----

===== Example 7:

给定如下 Check 配置:

[source,xml]
.package-info-header-must-be-missing.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
 	<module name="io.spring.javaformat.checkstyle.check.SpringHeaderCheck">
 		<property name="fileExtensions" value="java" />
		<property name="headerType" value="apache2"/>
 		<property name="headerCopyrightPattern" value="20\n\n-20\n\n"/>
		<property name="packageInfoHeaderType" value="none"/>
 	</module>
</module>
----

则:

[source,java]
.package-info-header-must-be-missing.java
----
/*
 * Copyright 2017-2019 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this foil except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example; // OK
----

===== Example 8:

给定如下 Check 配置:

[source,xml]
.package-info-header-must-be-missing-but-is-not.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
 	<module name="io.spring.javaformat.checkstyle.check.SpringHeaderCheck">
 		<property name="fileExtensions" value="java" />
		<property name="headerType" value="apache2"/>
 		<property name="headerCopyrightPattern" value="20\n\n-20\n\n"/>
		<property name="packageInfoHeaderType" value="none"/>
 	</module>
</module>
----

则:

[source,java]
.package-info-header-must-be-missing-but-is-not.java
----
/**
 * Something.
 */
package com.example; // OK
----

=== HideUtilityClassConstructorCheck

扩展 CheckStyle 的 `HideUtilityClassConstructorCheck`.
对指定的类排除规则检查。目前支持对以下注解忽略检查

* org.springframework.context.annotation.Configuration
* org.springframework.boot.autoconfigure.SpringBootApplication
* org.springframework.boot.autoconfigure.EnableAutoConfiguration

==== 示例

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

===== Example 1:

[source,java]
.HideUtilityClassConstructorInvalid.java
----
// header ignore

/**
 * Invlid utility class.
 *
 * @author Phillip Webb
 */
public class HideUtilityClassConstructorInvalid {

	public static void main(String[] args) { // violation,Utility classes should not have a public or default constructor.
	}

}

----

===== Example 2:

[source,java]
.HideUtilityClassConstructorSpringApplication.java
----
// header ignore

import org.springframework.boot.autoconfigure.SpringBootApplication;

/**
 * Usually invalid utility class but OK because it's a Spring Application.
 *
 * @author Phillip Webb
 */
@SpringBootApplication
public class HideUtilityClassConstructorSpringApplication {

	public static void main(String[] args) { // OK
	}

}

----

===== Example 3:

[source,java]
.HideUtilityClassConstructorSpringConfiguration.java
----
// header ignore

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

/**
 * Usually invalid utility class but OK because it's a Spring Configuration.
 *
 * @author Phillip Webb
 */
@Configuration
public class HideUtilityClassConstructorSpringConfiguration {

	@Bean
	public static String myBean() { // OK
		return "foo";
	}

}

----

=== SpringImportOrderCheck

检查导入顺序是否遵循 jcohy 约定. 定义了 `projectRootPackage` 属性。配置项目的根包。默认为 `com.jcohy`.定义了如下属性。

|===
|属性 |描述 |类型 |默认值

| projectRootPackage
| 指定的包始终在最底部
| String
| com.jcohy

| ordered
| 是否排序
| boolean
| true
|===

默认的组排序规则为:

* "java",
* "/^javax?\\./",
* "*",
* projectRootPackage

==== 示例

===== Example 1:

给定如下 Check 配置:

[source,xml]
.ImportOrderCustomPackageInvalid.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks">
		<property name="projectRootPackage" value="com.example"/>
	</module>
</module>
----

则:

[source,java]
.ImportOrderCustomPackageInvalid.java
----
// header ignore

package com.example;

import com.example.util.MyUtils1;
import com.example.util.MyUtils2;
import java.util.Objects;  // violation, Wrong order for 'java.util.Objects' import.

/**
 * Custom pacakge with valid imports.
 *
 * @author Phillip Webb
 */
public final class ImportOrderCustomPackageInvalid {

	private ImportOrderCustomPackageValid() {
	}

	public static void main(String[] args) {
		if (Objects.nonNull(args)) {
			MyUtils1.sort(args);
			MyUtils2.find(args);
		}
	}

}

----

===== Example 2:

给定如下 Check 配置:

[source,xml]
.ImportOrderCustomPackageInvalid.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks">
		<property name="projectRootPackage" value="com.example"/>
	</module>
</module>
----

则:

[source,java]
.ImportOrderCustomPackageValid.java
----
// header ignore

package com.example;

import java.util.Objects;

import com.example.util.MyUtils1;
import com.example.util.MyUtils2; // OK

/**
 * Custom pacakge with valid imports.
 *
 * @author Phillip Webb
 */
public final class ImportOrderCustomPackageValid {

	private ImportOrderCustomPackageValid() {
	}

	public static void main(String[] args) {
		if (Objects.nonNull(args)) {
			MyUtils1.sort(args);
			MyUtils2.find(args);
		}
	}

}

----

=== SpringJavadocCheck

检查 Javadoc 是否遵循既定的约定。默认对接口，类，枚举，注解，方法，构造函数进行检查.

* 禁止使用 @soundtrack 注解.
* @param,@throws,@return 的描述不应该以大写字母开头.
* @since 不应该在私有的接口，类，枚举，注解上使用.
* @since 在非私有的接口，类，枚举，注解上使用.
* 方法上的 Javadoc 在标签前不应该有空行.
* 注释不能包含 \"(non-Javadoc)\".

此 Checker 提供了以下属性

|===
|属性 |默认值 |说明

| requireSinceTag
|
| 是否必须使用 @since 注解

| publicOnlySinceTags
|
| 只在 public 的类上使用 @since 注解

| allowNonJavadocComments
|
| 允许 (non-Javadoc) 注释
|===

==== 示例

===== Example 1:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
.JavadocAuthorWithoutSpace.java
----
// header ignore

/**
 * Javadoc with a bad author tag.
 *
 * @author pwebb        // violation,Type Javadoc tag @author must match pattern
 */
public class JavadocAuthorWithoutSpace {

}

----

===== Example 2:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
.JavadocBadCase.java
----
// header ignore

/**
 * Javadoc with a bad author tag.
 *
 * @param <T> This is bad // violation,Javadoc element descriptions should not start with an uppercase letter.
 * @author Phillip Webb
 */
public class JavadocBadCase<T> {

	/**
	 * Do something.
	 * @param something A bad thing // violation,Javadoc element descriptions should not start with an uppercase letter.
	 * @return Naughty // violation,Javadoc element descriptions should not start with an uppercase letter.
	 * @throws RuntimeException I fail // violation,Javadoc element descriptions should not start with an uppercase letter.
	 */
	public String test(String something) throws RuntimeException {
	}

}
----

===== Example 3:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
.JavadocMethodEmptyLineBeforeTag.java
----
// header ignore

/**
 * Javadoc with white space.
 * @param <T> this is a valid param
 * @author Sushant Kumar Singh
 */
public class JavadocMethodEmptyLineBeforeTag<T> {

	/**
	 * Do something. // // violation,Method Javadoc should not have empty line before tag.
	 *
	 * @param something a lovely thing
	 */
	public void test(String something) {
	}

}
----

===== Example 4:

给定如下 Check 配置:

[source,xml]
.JavadocMissingSince.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringJavadocCheck">
			<property name="publicOnlySinceTags" value="true" />
			<property name="requireSinceTag" value="true" />
		</module>
	</module>
</module>
----

则:

[source,java]
.JavadocMissingSince.java
----
// header ignore

/**
 * Javadoc with a bad since tag.
 *
 * @author Phillip Webb // violation,Missing Javadoc @since tag.
 */
public class JavadocMissingSince {

	/**
	 * Inner class.
	 */
	private static class Inner {

	}

}
----

===== Example 5:

给定如下 Check 配置:

[source,xml]
.JavadocMissingSince.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
.JavadocNonJavadocComment.java
----
// header ignore

/**
 * Example with non javadoc comments.
 *
 * @author Phillip Webb
 */
public class JavadocNonJavadocComment {

	/* (non-Javadoc) // violation,Comments should not include "(non-Javadoc)
	 * Example.
	 */
	public void one() {
	}

	/**
	 * (non-Javadoc). // violation,Comments should not include "(non-Javadoc)
	 */
	public void two() {
	}

}
----

===== Example 6:

给定如下 Check 配置:

[source,xml]
.JavadocNonPublicSince.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringJavadocCheck">
			<property name="publicOnlySinceTags" value="true"/>
		</module>
	</module>
</module>
----

则:

[source,java]
.JavadocNonPublicSince.java
----
// header ignore

/**
 * Javadoc with a bad since tag.
 *
 * @author Phillip Webb
 * @since 1.2.3     // violation,Javadoc @since tag should not be used on private classes.
 */
class JavadocNonPublicSince {

	/**
	 * Inner class.
	 *
	 * @since 1.2.3      // violation,Javadoc @since tag should not be used on private classes.
	 */
	private static class Inner {

	}

}

----

===== Example 7:

给定如下 Check 配置:

[source,xml]
.JavadocNonPublicSinceInsideInterface.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringJavadocCheck">
			<property name="publicOnlySinceTags" value="true"/>
		</module>
	</module>
</module>
----

则:

[source,java]
.JavadocNonPublicSinceInsideInterface.java
----
// header ignore

/**
 * Javadoc with a good since tag.
 *
 * @author Phillip Webb
 * @since 1.2.3         // OK
 */
public interface JavadocNonPublicSinceInsideInterface {

	/**
	 * Inner enum.
	 *
	 * @since 1.2.3     // OK
	 */
	enum Inner {

		FOO

	}

}

----

===== Example 8:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
.JavadocSoundtrack.java
----
// header ignore

/**
 * Valid Javadoc.
 *
 * @param <T> this is a valid param
 * @author Phillip Webb
 * @soundtrack Gina G - Ooh Aah Just A Little Bit       // violation,Javadoc tag '@soundtrack' should not be used.
 */
public class JavadocSoundtrack<T> {

}

----

===== Example 9:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
.JavadocValid.java
----
// header ignore
// OK

/**
 * Valid Javadoc.
 *
 * @param <T> this is a valid param
 * @author Phillip Webb
 */
public class JavadocValid<T> {

	/**
	 * Do something.
	 * @param something a lovely thing
	 */
	public void test(String something) {
	}

	/**
	 * Do something else.
	 * @param something a loveley thing. Even if we've got some additional desc.
	 */
	public void test2(String something) {
	}

	/**
	 * Do something else.
	 * @param something a loveley thing that goes on a bit and causes us to wrap at end.
	 * Even if we've got some additional desc.
	 * @return the thing
	 * @throws RuntimeException on the error
	 */
	public String test3(String something) throws RuntimeException {
	}

}
----

=== SpringJUnit5Check

检查是否遵循 JUnit 5 约定以及是否不小心使用了 JUnit 4。提供了一个 `unlessImports` 属性，用来设置需要排除的导入

==== 示例

===== Example 1:

给定如下 Check 配置:

[source,xml]
.JUnit5BadAnnotation.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringJUnit5Check">
		</module>
 	</module>
</module>

----

则:

[source,java]
.JUnit5BadAnnotation.java
----
// header ignore

/**
 * Test with bad full qualified annotation.
 *
 * @author Phillip Webb
 */
public class JUnit5BadAnnotation {

	@org.junit.Test  // violation, JUnit 4 @Test annotation should not be used in a JUnit 5 test.
	void doSomethingWorks() {
		// test here
	}

}

----

===== Example 2:

给定如下 Check 配置:

[source,xml]
.JUnit5BadImport.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringJUnit5Check">
		</module>
 	</module>
</module>
----

则:

[source,java]
.JUnit5BadImport.java
----
// header ignore

import org.junit.jupiter.api.Test;
import org.junit.Before; //  violation,Import 'org.junit.Before' should not be used in a JUnit 5 test.

/**
 * Test with banned import.
 *
 * @author Phillip Webb
 */
public class JUnit5BadImport {

	@Before
	public void bad() {
	}

	@Test
	void doSomethingWorks() {
		// test here
	}

}

----

===== Example 3:

给定如下 Check 配置:

[source,xml]
.JUnit5BadImportWithOptOut.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringJUnit5Check">
			<property name="unlessImports" value="com.example.OptOutRunner"/>
		</module>
 	</module>
</module>
----

则:

[source,java]
.JUnit5BadImportWithOptOut.java
----
// header ignore

import com.example.OptOutRunner;
import org.junit.RunWith;
import org.junit.Test;

/**
 * Test with banned import but also opt-out trigger.
 *
 * @author Phillip Webb
 */
@RunWith(OptOutRunner.class) // OK
public class JUnit5BadImportWithOptOut {

	@Test
	void doSomethingWorks() {
		// test here
	}

}

----

===== Example 4:

给定如下 Check 配置:

[source,xml]
.JUnit5BadModifier.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringJUnit5Check">
		</module>
 	</module>
</module>
----

则:

[source,java]
.JUnit5BadModifier.java
----
// header ignore

import org.junit.jupiter.api.AfterAll;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.TestTemplate;

/**
 * Test with bad modifiers.
 *
 * @author Phillip Webb
 */
public class JUnit5BadModifier {

	@BeforeAll
	public static void publicBeforeAll() {  // violation,Lifecycle method 'publicBeforeAll' should not be public

	}

	@BeforeEach
	public void publicBeforeEach() {  // violation,Lifecycle method 'publicBeforeEach' should not be public

	}

	@AfterAll
	public static void publicAfterAll() {  // violation,Lifecycle method 'publicAfterAll' should not be public

	}

	@AfterEach
	public void publicAfterEach() {  // violation,Lifecycle method 'publicAfterEach' should not be public

	}

	@BeforeAll
	private static void privateBeforeAll() {  // violation,Lifecycle method 'privateBeforeAll' should not be public

	}

	@BeforeEach
	private void privateBeforeEach() {  // violation,Lifecycle method 'privateBeforeEach' should not be public

	}

	@AfterAll
	private static void privateAfterAll() {  // violation,Lifecycle method 'privateAfterAll' should not be public

	}

	@AfterEach
	private void privateAfterEach() {  // violation,Lifecycle method 'privateAfterEach' should not be public

	}

	@Test
	public void doSomethingWorks() {   // violation,Test method 'doSomethingWorks' should not be public
		// test here
	}

	@Test
	private void doSomethingElseWorks() {   // violation,Test method 'doSomethingElseWorks' should not be public
		// test here
	}

	@TestTemplate
	public void doSomethingWithTemplateWorks() {  // violation,Test method 'doSomethingWithTemplateWorks' should not be public
		// test here
	}

	@TestTemplate
	private void doSomethingElseWithTemplateWorks() {  // violation,Test method 'doSomethingElseWithTemplateWorks' should not be public
		// test here
	}

}
----

===== Example 5:

给定如下 Check 配置:

[source,xml]
.JUnit5Valid.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringJUnit5Check">
		</module>
 	</module>
</module>
----

则:

[source,java]
.JUnit5Valid.java
----
// header ignore

import org.junit.jupiter.api.Test;

/**
 * This is a valid example.
 *
 * @author Phillip Webb
 */
public class JUnit5Valid {

	@Test // OK
	void doSomethingWorks() {
		// test here
	}

}
----

=== SpringLambdaCheck

Lambda 表达式检查。一个参数的 lambda 应该有括号。 单语句实现不应使用花括号。提供了一个 `singleArgumentParentheses` 可选参数.用来配置单个参数是否应该有括号。默认为 `true`

==== 示例

===== Example 1:

给定如下 Check 配置:

[source,xml]
.LambdaExtraParens.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringLambdaCheck">
			<property name="singleArgumentParentheses" value="false"/>
		</module>
 	</module>
</module>
----

则:

[source,java]
.LambdaExtraParens.java
----
// header ignore

import java.util.function.Function;
import java.util.function.BiFunction;

/**
 * Lambda extra parentheses. If configured we enfoce that single args don't use
 * parentheses.
 *
 * @author Phillip Webb
 */
public class LambdaExtraParens {

	public Function<String, Integer> test() {
		return (string) -> 1; // violation, Lambda argument has unnecessary parentheses.
	}

	public BiFunction<String, String, Integer> test2() {
		return (string1, string2) -> 1;
	}

	public void test3() {
		Object x = null;
		List<String> result = input((String x) -> 123);
	}

	private <T extends CharSequence> List<T> input(Function<T, Integer> in) {
	}

}

----

以下的示例使用下面一个配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

===== Example 2:

[source,java]
.LambdaMissingParens.java
----
// header ignore

import java.util.function.Function;

/**
 * Lambda missing parentheses. Since it doesnt add much we always prefer {@code (f) -> 1;}
 * to {@code (f) -> 1;} (mainly so adding a paramter doesn't change the format).
 *
 * @author Phillip Webb
 */
public class LambdaMissingParens {

	public Function<String, Integer> test() {
		return string -> 1; // violation, Lambda argument missing parentheses.
	}

}
----

===== Example 3:

[source,java]
.LambdaNecessaryBlock.java
----
// header ignore

import java.util.function.Function;

/**
 * This is a valid example of a lambda where the block is required.
 *
 * @author Phillip Webb
 */
public class LambdaNecessaryBlock {

	public Function<String, Integer> test() {
		return (string) -> { // OK
			int i = 0;
			int j = 0;
			return 1;
		};
	}

}

----

===== Example 4:

[source,java]
.LambdaNecessaryEmptyBlock.java
----
// header ignore

import java.util.function.Function;

/**
 * This is a valid example of a lambda where the block is required.
 *
 * @author Phillip Webb
 */
public class LambdaNecessaryEmptyBlock {

	public Function<String, Integer> test() {
		return (string) -> { // OK
		};
	}

}
----

===== Example 5:

[source,java]
.LambdaNecessaryIfBlock.java
----
// header ignore

import java.util.function.Consumer;

/**
 * This is a valid example of a lambda where the block is required.
 *
 * @author Phillip Webb
 */
public class LambdaNecessaryIfBlock {

	public Consumer<String> test() {
		return (string) -> { // OK
			if (string.equals("foo")) {
				System.out.println("bar");
			}
		};
	}

}
----

===== Example 6:

[source,java]
.LambdaNecessaryIfElseBlock.java
----
// header ignore

import java.util.function.Consumer;

/**
 * This is a valid example of a lambda where the block is required.
 *
 * @author Phillip Webb
 */
public class LambdaNecessaryIfElseBlock {

	public Consumer<String> test() {
		return (string) -> { // OK
			if (string.equals("foo")) {
				System.out.println("bar");
			}
			else {
				System.out.println("baz");
			}
		};
	}

}
----

===== Example 7:

[source,java]
.LambdaNecessaryThrowBlock.java
----
// header ignore

import java.util.function.Function;

/**
 * This is a valid example of a lambda where the block is required.
 *
 * @author Phillip Webb
 */
public class LambdaNecessaryThrowBlock {

	public Function<String, Integer> test() {
		return (string) -> { // OK
			throw new RuntimeException("test");
		};
	}

}
----

===== Example 8:

[source,java]
.LambdaNecessaryTryBlock.java
----
// header ignore

import java.util.function.Function;

/**
 * This is a valid example of a lambda where the block is required.
 *
 * @author Phillip Webb
 */
public class LambdaNecessaryTryBlock {

	public Function<String, Integer> test() {
		return (string) -> { // OK
			try {
				return 0;
			}
			catch (Exception ex) {
				// Ignore
			}
		};
	}

}
----

===== Example 9:

[source,java]
.LambdaNecessaryVoidCallable.java
----
// header ignore

import java.util.concurrent.Callable;

/**
 * This is a valid example of a lambda where the block is required.
 *
 * @author Andy Wilkinson
 */
public class LambdaNecessaryVoidCallable {

	public Callable<Void> test() {
		return () -> { // OK
			new String("test");
			return null;
		};
	}

}
----

===== Example 10:

[source,java]
.LambdaUnnecessaryBlock.java
----
// header ignore

import java.util.function.Consumer;
import java.util.function.Function;

/**
 * Lambda blocks add noise since they introducde wrapping. If there's a single
 * statement we should not use them.
 *
 * @author Phillip Webb
 */
public class LambdaUnnecessaryBlock {

	public Function<String, Integer> test() {
		return (string) -> { // violation, Lambda block is unnecessary
			return 1;
		};
	}

	public Consumer<String> test() {
		return (string) -> { // violation, Lambda block is unnecessary
			new StringBuilder()
				.append("foo");
		};
	}

}

----

===== Example 11:

[source,java]
.LambdaValid.java
----
// header ignore

import java.util.function.Function;

/**
 * This is a valid example.
 *
 * @author Phillip Webb
 */
public class LambdaValid {

	public Function<String, Integer> test() {
		return (string) -> 1; // OK
	}

}

----

=== SpringLeadingWhitespaceCheck

检查每一行前面空格是否与缩进样式匹配。可以通过 `indentationStyle` 属性设置缩进的样式。值为 `tabs` 和 `spaces`
默认使用 tabs 缩进

==== 示例

===== Example 1:

给定如下 Check 配置:

[source,xml]
.LeadingWhitespaceSpaces.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringLeadingWhitespaceCheck">
			<property name="indentationStyle" value="spaces"/>
		</module>
 	</module>
</module>

----

则:

[source,java]
.LeadingWhitespaceSpaces.java
----
// header ignore

/**
 * Leading whitepace expects only tabs.
 *
 * @author Phillip Webb
 */
public class LeadingWhitespaceSpaces {

    /**
     * Comments are ignored.  // violation,Indentation should be performed with spaces only.
     */
    public void hello() {
    	System.out.println("World");
    }

}

----

===== Example 2:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
.LeadingWhitespaceSpaces.java
----
// header ignore

/**
 * Leading whitepace expects only tabs.
 *
 * @author Phillip Webb
 */
public class LeadingWhitespaceTabs {

	/**
	 * Comments are ignored.
	 */
	public void hello() { // violation,Indentation should be performed with tabs only.
	    System.out.println("World");
	}

}
----

=== SpringMethodOrderCheck

检查方法是否以正确的顺序定义. 方法顺序为: `equals`, `hashCode`, `toString`

==== 示例

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

===== Example 1:

[source,java]
.MethodOrderInvalid.java
----
// header ignore

/**
 * This is a valid example of method ordering.
 *
 * @author Phillip Webb
 */
public class MethodOrderInvalid {

	@Override
	public int hashCode() {  // violation,Method 'hashCode' is out of order

		return 0;
	}

	@Override
	public boolean equals(Object obj) {  // violation,Method 'equals' is out of order
		return false;
	}

	@Override
	public String toString() {
		return "";
	}

	/**
	 * Nested.
	 */
	interface Nested {

		@Override
		String toString();  // violation,Method 'toString' is out of order

		@Override
		boolean equals(Object obj);  // violation,Method 'equals' is out of order

		@Override
		int hashCode();  // violation,Method 'hashCode' is out of order

	}

}
----

===== Example 2:

[source,java]
.MethodOrderValid.java
----
// header ignore

/**
 * This is a valid example of method ordering.
 *
 * @author Phillip Webb
 */
public class MethodOrderValid {

	@Override
	public boolean equals(Object obj) { // OK
		return false;
	}

	@Override
	public int hashCode() { // OK
		return 0;
	}

	@Override
	public String toString() {  // OK
		return "";
	}

}
----

=== SpringMethodVisibilityCheck

检查  `protected`, `package-private` 和 `private`  的类没有公共方法，除非它们用 `@Override` 注解。

==== 示例

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

===== Example 1:

[source,java]
.MethodVisibilityInnerClassesWithPublicMethod.java
----
// header ignore

/**
 * Bad visibility because of public method.
 *
 * @author Phillip Webb
 */
public class MethodVisibilityInnerClassesWithPublicMethod {

	private static class PrivateInnerClass {

		public void badPrivateInner() { // violation,Method 'badPrivateInner' in private class should not be public.
		}

	}

	protected static class ProtectedInnerClass {

		public void okProtectedInner() {
		}

	}

	static class DefaultInnerClass {

		public void badDefaultInner() { // violation,Method 'badDefaultInner' in private class should not be public.
		}

	}

	public static class PublicInnerClass {

		public void okPublicInner() {
		}

	}
}
----

===== Example 2:

[source,java]
.MethodVisibilityPackagePrivateWithPublicMethod.java
----
// header ignore

/**
 * Bad visibility because of public method.
 *
 * @author Phillip Webb
 */
class MethodVisibilityPackagePrivateWithPublicMethod {

	MethodVisibilityPackagePrivateWithPublicMethod() {
	}

	public void bad() { // violation,Method 'bad' in private class should not be public.
	}

	public static void badStatic() { // violation,Method 'badStatic' in private class should not be public.
	}

}

----

===== Example 3:

[source,java]
.MethodVisibilityWithOverride.java
----
// header ignore

/**
 * Bad visibility because of public method.
 *
 * @author Phillip Webb
 */
public class MethodVisibilityWithOverride {

	private static class PrivateInnerClass {    // OK

		@Override
		public void okPrivateInner() {
		}

	}

	protected static class ProtectedInnerClass {

		@Override
		public void okProtectedInner() {    // OK
		}

	}

	static class DefaultInnerClass {

		@Override
		public void okDefaultInner() {  // OK
		}

	}

}
----

[source,java]
.NestedInterfaceItems.java
----
// header ignore

package io.spring.javaformat.checkstyle;

/**
 * Interface with implicit public elements.
 *
 * @author Phillip Webb
 */
public interface NestedInterfaceItems {

	/**
	 * A nested class class.
	 */
	class NestedClass {

		public NestedClass(String arg) {
			// This is valid because nested class is implicitly public
		}

		public void thisIsFine() {
		}

	}

}

----

[source,java]
.NewlineAtEndOfFile.java
----
// header ignore

public class NewlineAtEndOfFile {

}
----

=== SpringNoThisCheck

检查某些字段是否需要 `'this.'` 引用.提供两个可选属性 `names` 和 `allowAssignment`.`allowAssignment` 默认为 `true`

==== 示例

===== Example 1:

给定如下 Check 配置:

[source,xml]
.NoThis.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<!-- TreeWalker Checks -->
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.filter.RequiresOuterThisFilter" />
		<module name="com.jcohy.checkstyle.filter.IdentCheckFilter">
			<property name="names" value="logger" />
			<module
				name="com.puppycrawl.tools.checkstyle.checks.coding.RequireThisCheck">
				<property name="checkMethods" value="false" />
				<property name="validateOnlyOverlapping" value="false" />
			</module>
		</module>
		<module name="com.jcohy.checkstyle.check.SpringNoThisCheck">
			<property name="names" value="logger" />
		</module>
	</module>
</module>
----

则:

.NotThis.java
[source,java]
----
// header ignore

import org.apache.commons.logging.Log;

/**
 * Ensure this isn't use for loggers.
 *
 * @author Phillip Webb
 */
public class NotThis {

	private Log logger;

	public void test() {
		this.logger = null; // violation, Reference to instance variable 'logger' should not use "this.".
		this.logger.debug("test");
	}

	private class Nested {

		private String nested;

		Nested() {
			FiltersToSkipThis.this.logger.debug("string");
		}

	}

}
----

=== SpringTernaryCheck

检查三元操作是否遵循 Spring 约定。 所有三元测试都应该有括号。 应使用不等于而不是等于作为对空值的测试。 提供了 `equalsTest` 属性。有三个值:

.equalsTest 属性值
|===
|值 |说明

| any
| Equals tests 可用于任何测试

| never
| Equals tests 不能使用

| never_for_nulls
| Equals tests 不能使用对 null 的检查
|===

==== 示例

===== Example 1:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
----
// header ignore

/**
 * This is an example of a ternary expression.
 *
 * @author Phillip Webb
 */
public class TernaryEqualsEquals {

	public void valid() {
		boolean a = true;
		boolean b = false;
		boolean bb = true;
		int c = (a != b) ? 1 : 2;
		int d = ((a != b) | (a == b)) ? 1 : 2; // violation, Ternary operation should use != when testing
		int e = (a != (b | bb)) ? 1 : 2;
	}

	public void notValid() {
		Boolean a = true;
		int c = (a == null) ? 1 : 2;
	}

}

----

===== Example 2:

给定如下 Check 配置:

[source,xml]
.TernaryEqualsEqualsAny.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringTernaryCheck">
			<property name="equalsTest" value="any"/>
		</module>
 	</module>
</module>
----

则:

[source,java]
----
// header ignore

/**
 * This is an invalid example of a ternary expression.
 *
 * @author Phillip Webb
 */
public class TernaryEqualsEqualsAlways {

	public void test() {
		boolean a = true;
		boolean b = false;
		int c = (a != b) ? 1 : 2; // OK
	}

	public void test2() {
		Boolean a = true;
		int c = (a == null) ? 1 : 2;
	}

}

----

===== Example 3:

给定如下 Check 配置:

[source,xml]
.TernaryEqualsEqualsNever.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.SpringTernaryCheck">
			<property name="equalsTest" value="never"/>
		</module>
 	</module>
</module>
----

则:

[source,java]
----
// header ignore

/**
 * This is a valid example of a ternary expression.
 *
 * @author Phillip Webb
 */
public class TernaryEqualsEqualsNever {

	public void test() {
		boolean a = true;
		boolean b = false;
		int c = (a == b) ? 1 : 2; // violation, Ternary operation should use != when testing.
	}

}

----

===== Example 4:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
----
// header ignore

/**
 * This is an example of a ternary expression in an array.
 *
 * @author Phillip Webb
 */
public class TernaryInArray {

	public void test() {
		boolean a = true;
		boolean b = false;
		String[] c = new String[(a != b) ? 1 : 2];
		String d = c[(a != b) ? 1 : 2]; // OK
	}

}

----

===== Example 5:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
----
// header ignore

/**
 * This is a valid example of a ternary expression.
 *
 * @author Phillip Webb
 */
public class TernaryInIf {

	public void test() {
		boolean a = true;
		boolean b = false;
		if ((a != b) ? true : false) { // OK
			System.out.println("OK");
		}
	}

}

----

===== Example 6:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
----
// header ignore

/**
 * This is a valid example of a ternary expression.
 *
 * @author Phillip Webb
 */
public class TernaryInWhile {

	public void test() {
		boolean a = true;
		boolean b = false;
		while ((a != b) ? true : false) { // OK
			System.out.println("OK");
		}
	}

}

----

===== Example 7:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
----
// header ignore

/**
 * This is a valid example of a ternary expression.
 *
 * @author Phillip Webb
 */
public class TernaryParensAndPlus {

	public void test() {
		boolean a = true;
		boolean b = false;
		String c = new String((a != b) ? "1" + "2" : "3"); // OK
	}

}

----

===== Example 8:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
----
// header ignore

/**
 * This is a invalid example of invalid ternary expressions.
 *
 * @author Phillip Webb
 */
public class TernaryParensInvalid {

	public void test() {
		boolean a = true;
		boolean b = false;
		int d = a != b ? 1 : 2; // violation, Ternary operation missing parentheses. Use the form "(a != b) ? y : n"
		int e = (a != b ? 1 : 2);
		int f = (a != b) | (a == b) ? 1 : 2;
	}

}

----

===== Example 9:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks" />
</module>
----

则:

[source,java]
----
// header ignore

/**
 * This is a valid example of valid ternary expressions.
 *
 * @author Phillip Webb
 */
public class TernaryParensValid { // OK

	private boolean test;

	public void test() {
		boolean a = true;
		boolean b = false;
		int c = (a != b) ? 1 : 2;
		int d = a ? 1 : 2;
		int e = ((a != b) | (a == b)) ? 1 : 2;
		int d = "a".equals("b") ? 1 : 2;
	}

	public int withMember() {
		return this.test ? 1 : 2;
	}

}
----

=== JcohyAbbreviationAsWordInNameCheck

检查类，接口，枚举是否符合驼峰命名，但以下情形例外：DO / BO / DTO / VO / AO。并提供 `suffix` 属性，可以设置指定的后缀:

==== 示例

===== Example 1:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks"/>
</module>
----

则:

[source,java]
----
// header ignore

package com.jcohy.checkstyle;

/**
 * Copyright: Copyright (c) 2021.
 * <a href="http://www.jcohy.com" target="_blank">jcohy.com</a>
 *
 * <p>
 * Description:
 *
 * @author jiac
 * @version 1.0.0 2021/6/30:15:57
 * @since 1.0.0
 */
public class AbbreviationInValidDT { // violation, abbreviation.as.word

    private String name;

    private String label;

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getLabel() {
        return this.label;
    }

    public void setLabel(String label) {
        this.label = label;
    }
}
----

===== Example 2:

给定如下 Check 配置:

[source,xml]
.default-checkstyle-configuration.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<module name="com.jcohy.checkstyle.JcohyChecks"/>
</module>
----

则:

[source,java]
----
// header ignore

package com.jcohy.checkstyle;

/**
 * Copyright: Copyright (c) 2021.
 * <a href="http://www.jcohy.com" target="_blank">jcohy.com</a>
 *
 * <p>
 * Description:
 *
 * @author jiac
 * @version 1.0.0 2021/6/30:15:57
 * @since 1.0.0
 */
public class AbbreviationValidDTO { // OK

    private String name;

    private String label;

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getLabel() {
        return this.label;
    }

    public void setLabel(String label) {
        this.label = label;
    }
}

----

===== Example 3:

给定如下 Check 配置:

[source,xml]
.AbbreviationValidWithDDD.xml
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<!-- TreeWalker Checks -->
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.check.naming.JcohyAbbreviationAsWordInNameCheck">
			<property name="suffix" value="DDD" />
		</module>
	</module>
</module>
----

则:

[source,java]
----
// header ignore

package com.jcohy.checkstyle;

/**
 * Copyright: Copyright (c) 2021.
 * <a href="http://www.jcohy.com" target="_blank">jcohy.com</a>
 *
 * <p>
 * Description:
 *
 * @author jiac
 * @version 1.0.0 2021/6/30:15:57
 * @since 1.0.0
 */
public class AbbreviationValidWithDDD { // OK

    private String name;

    private String label;

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getLabel() {
        return this.label;
    }

    public void setLabel(String label) {
        this.label = label;
    }
}
----

== Filter

=== IdentCheckFilter

`IdentCheckFilter` 用来配置关于 `this.` 变量引用的问题, 可以跳过某些变量对于 `this.` 的引用。一般被包裹在 `RequiresOuterThisFilter` 中，如下配置，跳过对变量 logger 的 `this.` 引用。

`IdentCheckFilter` 提供了 `names` 属性，可以用来配置不需要 `this` 引用的变量

[source,xml]
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<!-- TreeWalker Checks -->
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<module name="com.jcohy.checkstyle.filter.RequiresOuterThisFilter" />
		<module name="com.jcohy.checkstyle.filter.IdentCheckFilter">
			<property name="names" value="logger" />
			<module name="com.puppycrawl.tools.checkstyle.checks.coding.RequireThisCheck">
				<property name="checkMethods" value="false" />
				<property name="validateOnlyOverlapping" value="false" />
			</module>
		</module>
	</module>
</module>
----

[source,java]
.FiltersToSkipThis.java
----
// header Ignore

import org.apache.commons.logging.Log;

/**
 * Allow this to be skipped items.
 *
 * @author Phillip Webb
 */
public class FiltersToSkipThis {

	private Log logger;

	private String inner;

	public void test() {
		logger.debug("test"); // OK
		inner = "test"; // violation, Reference to instance variable 'inner' needs "this.".
	}

	private class Nested {

		private String nested;

		Nested() {
			String x = inner;
			nested = "ok"; // violation, Reference to instance variable 'nested' needs "this.".
		}

	}

}

----

== 自定义 checkstyle 规则

[source,xml]
----
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
		"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
		"https://checkstyle.org/dtds/configuration_1_3.dtd">
<module name="com.puppycrawl.tools.checkstyle.Checker">
	<property name="localeCountry" value="CN"/>
	<property name="localeLanguage" value="cn"/>
	<!-- Root Checks -->
	<module name="com.jcohy.checkstyle.check.SpringHeaderCheck">
		<property name="fileExtensions" value="java"/>
		<property name="headerType" value="${headerType}"/>
		<property name="headerFile" value="${headerFile}" default=""/>
		<property name="headerCopyrightPattern" value="${headerCopyrightPattern}"/>
	</module>

	<!-- 检查文件是否以一个新行结束-->
	<module name="com.puppycrawl.tools.checkstyle.checks.NewlineAtEndOfFileCheck"/>

<!--	&lt;!&ndash;【强制】采用 4 个空格缩进，禁止使用 tab 字符。 &ndash;&gt;-->
<!--	<module name="com.puppycrawl.tools.checkstyle.checks.whitespace.FileTabCharacterCheck">-->
<!--		<property name="eachLine" value="true"/>-->
<!--	</module>-->

	<!-- 尺寸超规 -->
	<!-- 【强制】单行字符数限不超过 120 个，超出需要换行时 -->
	<module name="com.puppycrawl.tools.checkstyle.checks.sizes.LineLengthCheck">
		<property name="fileExtensions" value="java"/>
		<property name="max" value="120"/>
		<property name="ignorePattern"
				  value="^package.*|^import.*|a href|href|http://|https://|ftp://"/>
	</module>

	<!-- TreeWalker Checks -->
	<module name="com.puppycrawl.tools.checkstyle.TreeWalker">
		<!-- 注解 -->
		<!-- 检查注解风格，这项检查可以控制要使用的注解的样式。-->
		<module name="com.puppycrawl.tools.checkstyle.checks.annotation.AnnotationUseStyleCheck">
			<property name="elementStyle" value="compact"/>
		</module>
		<!-- 当出现 @inheritDoc 的 Javadoc 标签时，验证 java.lang.Override 注解是否出现。-->
		<module name="com.puppycrawl.tools.checkstyle.checks.annotation.MissingOverrideCheck"/>
		<!-- 这项检查可以确保所有包的注解都在 package-info.java 文件中。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.annotation.PackageAnnotationCheck"/>
		<!-- 这项检查注解的位置。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.annotation.AnnotationLocationCheck">
			<property name="allowSamelineSingleParameterlessAnnotation" value="false"/>
		</module>

		<!-- Block Checks -->
		<!-- 检查空代码块。要求代码块中有文本 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.blocks.EmptyBlockCheck">
			<property name="option" value="text"/>
		</module>
		<!-- 检查代码块的左花括号的放置位置。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.blocks.LeftCurlyCheck">
			<property name="ignoreEnums" value="false"/>
		</module>
		<!-- 检查右大括号的放置位置。option: 右大括号是否单独一行显示，tokens: 定义检查的类型。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.blocks.RightCurlyCheck">
			<property name="option" value="alone"/>
		</module>
		<!-- 检查是否应该使用括号的地方没有加括号。tokens: 定义检查的类型 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.blocks.NeedBracesCheck"/>
		<!-- 检查是否有嵌套的代码块。allowInSwitchCase: 定义是否允许 switch case 中使用嵌套的代码块 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.blocks.AvoidNestedBlocksCheck"/>

		<!-- 类设计 -->
		<!-- 只有私有构造器的类必须声明为 final -->
		<module name="com.puppycrawl.tools.checkstyle.checks.design.FinalClassCheck"/>
		<!-- 检查接口是否只定义了变量而没有定义方法，因为接口应该用来描述一个类型，所以只定义变量而不定义方法是不恰当的.allowMarkerInterfaces: 是否检查空接口-->
		<module name="com.puppycrawl.tools.checkstyle.checks.design.InterfaceIsTypeCheck"/>
		<!-- 查看文档 -->
		<module name="com.jcohy.checkstyle.check.SpringHideUtilityClassConstructor"/>
		<!-- 检查异常是不可变的 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.design.MutableExceptionCheck"/>
		<!-- 检查嵌套/内部的类型是否在当前类的最底部声明（在所有的方法/字段的声明之后）。-->
		<module name="com.puppycrawl.tools.checkstyle.checks.design.InnerTypeLastCheck"/>
		<!-- 检查每个顶级类、接口、枚举或注解是否位于其自己的源文件中。-->
		<module name="com.puppycrawl.tools.checkstyle.checks.design.OneTopLevelClassCheck"/>

		<!-- 编码 -->
		<!-- 检查是否 equals 的重载，如果有必须明确指定 Object 类型。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.CovariantEqualsCheck"/>
		<!-- 检查空语句。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.EmptyStatementCheck"/>
		<!-- 检查 equals 语句，文字位于左侧，变量在右侧。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.EqualsAvoidNullCheck"/>
		<!-- 检查在重写了 equals 方法后是否重写了 hashCode 方法 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.EqualsHashCodeCheck"/>
		<!-- 检查子表达式中是否有赋值语句 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.InnerAssignmentCheck"/>
		<!-- 检查子表达式中是否有赋值语句 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.NoEnumTrailingCommaCheck"/>
		<!-- 检查是否有魔法值 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.MagicNumberCheck">
			<property name="ignoreHashCodeMethod" value="true"/>
			<property name="ignoreAnnotationElementDefaults" value="true"/>
		</module>
		<!-- 检查是否有过于复杂的布尔表达式。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.SimplifyBooleanExpressionCheck"/>
		<!-- 检查是否有过于复杂的布尔类型 return 语句 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.SimplifyBooleanReturnCheck"/>
		<!-- String 的比较不能用!= 和 == -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.StringLiteralEqualityCheck"/>
		<!-- 限制 for 循环的嵌套层数为 3 层 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.NestedForDepthCheck">
			<property name="max" value="3"/>
		</module>
		<!-- 限制 if 循环的嵌套层数为 3 层 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.NestedIfDepthCheck">
			<property name="max" value="3"/>
		</module>
		<!-- 限制 try 代码块的嵌套层数为 3 层  -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.NestedTryDepthCheck">
			<property name="max" value="3"/>
		</module>
		<!-- 同一行不能有多个声明 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.MultipleVariableDeclarationsCheck"/>
		<!-- 检查每行是否只有一个语句。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.OneStatementPerLineCheck"/>
		<!-- 在一个 switch 块内，每个 case 要么通过 break/return 等来终止，要么注释说明程序将继续执行到哪一个 case 为止；
		在一个 switch 块内，都必须包含一个 default 语句并且放在最后，即使它什么代码也没有。-->
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.MissingSwitchDefaultCheck"/>
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.DefaultComesLastCheck"/>
		<module name="com.puppycrawl.tools.checkstyle.checks.coding.FallThroughCheck"/>

		<!-- 导入 -->
		<!-- 检查 import 语句是否使用 * 符号 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.imports.AvoidStarImportCheck"/>
		<!-- 检查是否导入了不必显示导入的类 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.imports.RedundantImportCheck"/>
		<!-- 检查是否导入的包没有使用. processJavadoc: 检查是否处理 Javadoc 注解 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.imports.UnusedImportsCheck">
			<property name="processJavadoc" value="true"/>
		</module>
		<!-- 检查导入顺序是否遵循 jcohy 约定 -->
		<module name="com.jcohy.checkstyle.check.SpringImportOrderCheck">
			<property name="projectRootPackage" value="${projectRootPackage}"/>
		</module>

		<!-- Javadoc 注释 -->
		<!-- 检查类或者接口的 javadoc 注解 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocTypeCheck">
			<property name="scope" value="package"/>
			<property name="authorFormat" value="^[a-zA-Z0-9]{2,20}"/>
		</module>
		<!-- 检查方法的 javadoc 注解 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocMethodCheck"/>
		<!-- 检查 public 变量的 javadoc 注解 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocVariableCheck">
			<property name="scope" value="public"/>
		</module>
		<!-- javadoc 风格。checkEmptyJavadoc：检查 javadoc 是否缺少描述文本-->
		<module name="com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocStyleCheck">
			<property name="checkEmptyJavadoc" value="true"/>
		</module>
		<!-- 检查块标签后面是否具有描述 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.javadoc.NonEmptyAtclauseDescriptionCheck"/>
		<!-- 检查块标签后的描述如果具有多行，指定连续行之间的缩进 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.javadoc.JavadocTagContinuationIndentationCheck">
			<property name="offset" value="0"/>
		</module>
		<!-- 检查 javadoc 块标签或 javadoc 标签的顺序 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.javadoc.AtclauseOrderCheck">
			<property name="tagOrder"
					  value="@param, @author, @version, @since, @see, @serial, @deprecated"/>
			<property name="target" value="CLASS_DEF, INTERFACE_DEF, ENUM_DEF"/>
		</module>
		<!-- 检查 javadoc 块标签或 javadoc 标签的顺序 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.javadoc.AtclauseOrderCheck">
			<property name="tagOrder"
					  value="@param, @return, @throws, @since, @see, @deprecated"/>
			<property name="target" value="METHOD_DEF, CTOR_DEF, VARIABLE_DEF"/>
		</module>


		<!-- 杂项 -->
		<!-- 控制注释和周围代码之间的缩进 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.indentation.CommentsIndentationCheck">
			<property name="tokens" value="BLOCK_COMMENT_BEGIN"/>
		</module>
		<!-- 检查初始化 long 变量时，数字後是加了大写字母'L'而不是小写字母'l' -->
		<module name="com.puppycrawl.tools.checkstyle.checks.UpperEllCheck"/>
		<!-- 【强制】中括号是数组类型的一部分，数组定义如下：String[] args; -->
		<module name="com.puppycrawl.tools.checkstyle.checks.ArrayTypeStyleCheck"/>
		<!-- 检查外部类型名称和文件名是否匹配 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.OuterTypeFilenameCheck"/>

		<!-- 修饰符 -->
		<!-- 检查是否有多余的修饰符 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.modifier.RedundantModifierCheck"/>
		<!-- 检查修饰符的顺序 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.modifier.ModifierOrderCheck"/>

		<!-- 命名风格 -->
		<!-- 代码中的命名均不能以下划线或美元符号开始，也不能以下划线或美元符号结束。-->
		<module name="com.puppycrawl.tools.checkstyle.checks.naming.IllegalIdentifierNameCheck">
			<property name="format" value="^(?!(_|\$))(?!.*?(_|\$)$)"/>
		</module>
		<!-- 抽象类命名使用 Abstract 或 Base 开头；异常类命名使用 Exception 结尾；测试类命名以它要测试的类的名称开始，以 Test 结尾。目前仅支持抽象类。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.naming.AbstractClassNameCheck">
			<property name="format" value="^(Abstract|Base).+$"/>
		</module>
		<module name="com.puppycrawl.tools.checkstyle.checks.naming.ConstantNameCheck">
			<property name="format" value="^log(ger)?$|^[A-Z][A-Z0-9]*(_[A-Z0-9]+)*$"/>
		</module>


		<!-- Regexp -->
		<!-- 检查单行是否匹配一条给定的正则表达式 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineJavaCheck">
			<property name="maximum" value="0"/>
			<property name="format"
					  value="org\.mockito\.(Mockito|BDDMockito)\.(when|doThrow|doAnswer)"/>
			<property name="message"
					  value="Please use BDD-style (given, when, then) using BDDMockito imports."/>
			<property name="ignoreComments" value="true"/>
		</module>
		<!-- 检查单行是否匹配一条给定的正则表达式 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.regexp.RegexpSinglelineJavaCheck">
			<property name="maximum" value="0"/>
			<property name="format"
					  value="org\.junit\.(Assert|jupiter\.api\.Assertions)\.assert"/>
			<property name="message"
					  value="Please use AssertJ imports."/>
			<property name="ignoreComments" value="true"/>
		</module>
		<!-- 检查指定的正则表达式是否存在、存在的次数少于设定的次数，或者在文件中不存在。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.regexp.RegexpCheck">
			<property name="format" value="[ \t]+$"/>
			<property name="illegalPattern" value="true"/>
			<property name="message" value="Trailing whitespace"/>
		</module>


		<!-- Whitespace -->
		<!-- 检查泛型标记 < 和 > 的周围的空格是否遵守标准规约 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.whitespace.GenericWhitespaceCheck"/>
		<!-- 检查方法定义、构造器定义、方法调用、构造器调用的标识符和参数列表的左圆括号之间的填充符。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.whitespace.MethodParamPadCheck"/>
		<!-- 检查指定标记之后没有空格。若要禁用指定标记之后的换行符，将 allowLineBreaks 属性设为 false 即可。-->
		<module name="com.puppycrawl.tools.checkstyle.checks.whitespace.NoWhitespaceAfterCheck">
			<property name="tokens"
					  value="BNOT, DEC, DOT, INC, LNOT, UNARY_MINUS, UNARY_PLUS, ARRAY_DECLARATOR"/>
		</module>
		<!-- 检查指定标记之前没有空格。若要允许指定标记之前的换行符，将 allowLineBreaks 属性设为 true 即可。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.whitespace.NoWhitespaceBeforeCheck"/>
		<!-- 检查圆括号的填充符策略，也就是在左圆括号之后和右圆括号之前是否需要有一个空格。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.whitespace.ParenPadCheck"/>
		<!-- 检查类型转换的圆括号的填充符策略。也就是，在左圆括号之后和右圆括号之前是否需要有一个空格。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.whitespace.TypecastParenPadCheck"/>
		<!-- 检查指定标记之后是否紧跟了空格。 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.whitespace.WhitespaceAfterCheck"/>
		<!-- 检查指定标记的周围是否有空格 -->
		<module name="com.puppycrawl.tools.checkstyle.checks.whitespace.WhitespaceAroundCheck"/>

		<!-- Spring Conventions -->
		<!--  -->
		<module name="com.jcohy.checkstyle.check.SpringAvoidStaticImportCheck">
			<property name="excludes" value="${avoidStaticImportExcludes}"/>
		</module>
		<!--  -->
		<module name="com.jcohy.checkstyle.check.SpringLambdaCheck"/>
		<!--  -->
		<module name="com.jcohy.checkstyle.check.SpringTernaryCheck"/>
		<!--  -->
		<module name="com.jcohy.checkstyle.check.SpringCatchCheck"/>
		<!--  -->
		<module name="com.jcohy.checkstyle.check.SpringJavadocCheck"/>
		<!--  -->
		<module name="com.jcohy.checkstyle.check.SpringLeadingWhitespaceCheck">
			<property name="indentationStyle" value="spaces"/>
		</module>
		<!--  -->
		<module name="com.jcohy.checkstyle.check.SpringMethodOrderCheck"/>
		<!--  -->
		<module name="com.jcohy.checkstyle.check.SpringMethodVisibilityCheck"/>
		<module name="com.jcohy.checkstyle.filter.RequiresOuterThisFilter"/>
		<module name="com.jcohy.checkstyle.filter.IdentCheckFilter">
			<property name="names" value="logger"/>
			<!-- 检查代码是否使用了“this.”. checkMethods: 是否检查方法调用.validateOnlyOverlapping 是否检查变量或参数的重叠 -->
			<module name="com.puppycrawl.tools.checkstyle.checks.coding.RequireThisCheck">
				<property name="checkMethods" value="false"/>
				<property name="validateOnlyOverlapping" value="false"/>
			</module>
		</module>
		<module name="com.jcohy.checkstyle.check.SpringNoThisCheck">
			<property name="names" value="logger"/>
		</module>
		<module name="com.jcohy.checkstyle.check.naming.JcohyAbbreviationAsWordInNameCheck">
			<property name="allowedAbbreviationLength" value="0"/>
		</module>

	</module>
</module>
----

=

最后，调用 `publishToSonatype` 和 `closeAndReleaseSonatypeStagingRepository` 就可以分别发布到Sonatype和关闭并发布到中央仓库了。

git pull http://3b7t671894.zicp.vip/jiac/jcohy-gradle-plugins.git

git push xw master git push origin master

git pull xw master git push origin master